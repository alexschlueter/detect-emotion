%!TEX TS-program = pdflatex
%!BIB program = biber
% -- Author: Jannes Bantje, j.bantje@wwu.de
\input{preamble.tex}

\begin{document}
\date{16. September 2016}
\pagenumbering{Roman} % Seitennummerierung auf römische Zahlen setzen

\input{title.tex}

\begin{abstract}
\section*{Vorwort}
Hier entsteht ein Vorwort.
\end{abstract}
\tableofcontents
\cleardoubleoddemptypage
\pagenumbering{arabic}
\setcounter{page}{1}

\chapter{Erstes Kapitel}
\pgfplotstableread[x expr=\thisrowno{0}*cos(6)+\thisrowno{1}*sin(6),y expr=\thisrowno{0}*-sin(6)+\thisrowno{1}*cos(6)]{data/face_lipcorner_low.dat}{\facerot}
\pgfplotstablecreatecol[
create col/expr={\thisrow{0}*cos(6)+\thisrow{1}*sin(6)}
]{xrot}{\facerot}
\pgfplotstablecreatecol[
create col/expr={\thisrow{0}*-sin(6)+\thisrow{1}*cos(6)}
]{yrot}{\facerot}
\begin{figure}
  \centering
\begin{tikzpicture}
  \begin{axis}[
    name=plot1,
    width=6cm,
    height=6cm,
    ticks=none,
    y dir=reverse
    ]
    \addplot [
    mark=o,
    only marks,
    mark size=1pt
    ] table [x=xrot, y=yrot] \facerot;
    \addplot [
    red,
    x filter/.expression={\coordindex==36 || \coordindex==45 ? x : nan}
    ] table [x=xrot, y=yrot] \facerot;
    \addplot [
    blue,
    dashed,
    x filter/.expression={\coordindex==16 || \coordindex==0 ? x : nan}
    ] table [x=xrot, y=yrot] \facerot;
 \end{axis}
  \begin{axis}[
    name=plot2,
    at={($(plot1.right of east)+(3cm,0)$)}, anchor=left of west,
    width=6cm,
    height=6cm,
    ticks=none,
    y dir=reverse
    ]
    \addplot [
    mark=o,
    only marks,
    mark size=1pt
    ] table \facerot;
    \addplot [
    red,
    x filter/.expression={\coordindex==36 || \coordindex==45 ? x : nan}
    ] table \facerot;
    \addplot [
    blue,
    dashed,
    x filter/.expression={\coordindex==16 || \coordindex==0 ? x : nan}
    ] table \facerot;
 \end{axis}
\draw  \myarrowopts ($(plot1.east)+(0.5cm,0)$) -- ($(plot2.west)+(-0.5cm,0)$) node[above,midway] {normalize} node[below,midway] {rotation};
\end{tikzpicture}
\caption{Normalisierung der Rotation anhand ausgesuchter Linien}
\end{figure}
\begin{figure}
  \centering
\begin{tikzpicture}
  \begin{scope}[local bounding box=scope1]
  \begin{axis}[
    width=7cm,
    height=4cm,
    ticks=none,
    y dir=reverse,
    axis lines=none
    ]
    \addplot [
    draw=blue,
    mark=*,
    only marks,
    mark size=1pt,
    nodes near coords={
      \pgfmathparse{int(\coordindex+48)}
      \pgfmathresult
    },
    every node near coord/.style={
        font=\scriptsize,
        anchor=south west,
        xshift=-2pt,
        yshift=-3pt
      },
      select coords between index={48}{54},
    ] table {data/face_lipcorner_low.dat};
    \addplot [
    fill=blue,
    mark=o,
    only marks,
    mark size=1pt,
    select coords between index={55}{65},
    ] table {data/face_lipcorner_low.dat};
  \end{axis}
\end{scope}
  \begin{scope}[local bounding box=scope2, shift={($(scope1.east)+(3cm,-0.6cm)$)}]
    
  \begin{axis}[
    width=0.4\textwidth,
    height=3.5cm,
    axis lines=left,
    ticks=none,
    xmin=-0.55,
    ymin=-4e-2,
    legend entries={$ax^4+bx^3+cx²+dx+e$},
    legend style={
      at={(0,-0.2)},
      anchor=north west
    }
    ]
    \addplot [
    forget plot,
    draw=blue,
    mark=*,
    only marks,
    mark size=1pt,
    nodes near coords={
      \pgfmathparse{int(\coordindex+48)}
      \pgfmathresult
    },
    every node near coord/.style={
        font=\scriptsize,
        anchor=south west,
        xshift=-2pt,
        yshift=-3pt
    }
    ] table {data/lipcorner_low_norm.dat};
    \addplot [red,
    domain=-0.5:0.5
    ] {1.893688218710873339e-02 +
      x * (-3.121906790233518192e-02 +
      x * (-5.189325604221312060e-02 +
      x * (1.475542295096524681e-01 +
      x * (-6.156357895166050254e-01))))};

  \end{axis}
  \end{scope}
  \begin{scope}[local bounding box=scope3,shift={($(scope2.east)+(3cm,0)$)}]
% \node {$\colvec{5}{-0.616}{0.148}{-0.052}{-0.031}{0.019}$};
\node  {$\colvec{5}{a}{b}{c}{d}{e}$};
  \end{scope}
\draw  \myarrowopts ($(scope1.east)+(0.5cm,0)$) -- ($(scope2.west)+(-0.5cm,0)$) node[above,midway] {normalize + fit};
\draw \myarrowopts ($(scope2.east)+(0.5cm,0)$) -- ($(scope3.west)+(-0.5cm,0)$) node[above,midway] {extract coeffs.};

\end{tikzpicture}
\caption{InterpolationFeatureExtraction}
\end{figure}

\begin{figure}
  \centering
  \begin{tikzpicture}
    \begin{axis}[
      title=Lips Part,
      only marks,
      mark size=1.5pt,
      xlabel=$1-\text{Precision}$,
      ylabel=Recall
      ]
     \addplot table [x index=1, y index=2, x expr={1-\thisrow{Precision}}] {data/validation/Lips_Part.dat};
    \end{axis}
  \end{tikzpicture}
  \caption{Ergebnisse der Klassifikatoren und Parameter für Lips Part}
\end{figure}



\begin{figure}
  \centering
  \pgfplotstabletypeset[
  precision=3,
  columns={F1Validation, F1Test, PrecisionTest,
    RecallTest}, columns/F1Validation/.style={column name={F1 score
      Validation}}, columns/F1Test/.style={column name={F1 score Test}},
  columns/PrecisionTest/.style={column name={Precision Test}},
  columns/RecallTest/.style={column name={Recall Test}}
  ]{data/top5/Lips_Part.dat}
  
  \caption{F1 scores und Testergebnisse der Top 5 Klassifikatoren für Lips Part}
\end{figure}



\appendix % hier beginnt der Anhang
\printbibliography
\end{document}
