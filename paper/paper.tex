%!TEX TS-program = pdflatex
%!BIB program = biber
% -- Author: Jannes Bantje, j.bantje@wwu.de
\input{preamble.tex}

\begin{document}
\date{16. September 2016}
\pagenumbering{Roman} % Seitennummerierung auf römische Zahlen setzen

\input{title.tex}

\begin{abstract}
\section*{Vorwort}
Hier entsteht ein Vorwort.
\end{abstract}
\tableofcontents
\cleardoubleoddemptypage
\pagenumbering{arabic}
\setcounter{page}{1}

\chapter{Erstes Kapitel}
\begin{figure}
  \centering
\begin{tikzpicture}
  \begin{axis}[
  % anchor=origin, % Same as before
    % rotate around={6:(current axis.origin)},
    width=10cm,
    height=10cm,
    ticks=none,
    y dir=reverse
    ]
    \addplot [
    mark=o,
    only marks,
    mark size=1pt,
    % nodes near coords={
    %   \pgfmathprintnumber\coordindex
    % },
    % every node near coord/.style={
    %     font=\scriptsize,
    %     anchor=north west,
    %     xshift=-3pt,
    %     yshift=3pt
    % }
    ] table [x expr=\thisrowno{0}*cos(6)+\thisrowno{1}*sin(6),y expr=\thisrowno{0}*-sin(6)+\thisrowno{1}*cos(6)]{data/face_lipcorner_low.dat};
    \addplot [
    red,
    x filter/.expression={\coordindex==36 || \coordindex==45 ? x : nan}
    ] table [
    x expr=\thisrowno{0}*cos(6)+\thisrowno{1}*sin(6),y expr=\thisrowno{0}*-sin(6)+\thisrowno{1}*cos(6)
    ] {data/face_lipcorner_low.dat};
    \addplot [
    blue,
    dashed,
    x filter/.expression={\coordindex==16 || \coordindex==0 ? x : nan}
    ] table [
    x expr=\thisrowno{0}*cos(6)+\thisrowno{1}*sin(6),y expr=\thisrowno{0}*-sin(6)+\thisrowno{1}*cos(6)
    ] {data/face_lipcorner_low.dat};
 \end{axis}
\end{tikzpicture}
\caption{66 Landmarks bilden ein Gesicht.}
\end{figure}
\begin{figure}
  \centering
\begin{tikzpicture}
  \begin{scope}[local bounding box=scope1]
  \begin{axis}[
    width=7cm,
    height=4cm,
    ticks=none,
    y dir=reverse,
    axis lines=none
    ]
    \addplot [
    draw=blue,
    mark=*,
    only marks,
    mark size=1pt,
    nodes near coords={
      \pgfmathparse{int(\coordindex+48)}
      \pgfmathresult
    },
    every node near coord/.style={
        font=\scriptsize,
        anchor=south west,
        xshift=-2pt,
        yshift=-3pt
      },
      select coords between index={48}{54},
    ] table {data/face_lipcorner_low.dat};
    \addplot [
    fill=blue,
    mark=o,
    only marks,
    mark size=1pt,
    select coords between index={55}{65},
    ] table {data/face_lipcorner_low.dat};
  \end{axis}
\end{scope}
\draw  \myarrowopts ($(scope1.east)+(0.5cm,0)$) -- ($(scope1.east)+(2cm,0)$) node[above,midway] {normalize + fit};
  \begin{scope}[local bounding box=scope2, shift={($(scope1.south east)+(3cm,0.5cm)$)}]
    
  \begin{axis}[
    width=0.4\textwidth,
    height=3.5cm,
    axis lines=left,
    ticks=none,
    legend entries={$ax^4+bx^3+cx²+dx+e$},
    legend style={
      at={(0,-0.2)},
      anchor=north west
    }
    ]
    \addplot [
    forget plot,
    draw=blue,
    mark=*,
    only marks,
    mark size=1pt,
    nodes near coords={
      \pgfmathparse{int(\coordindex+48)}
      \pgfmathresult
    },
    every node near coord/.style={
        font=\scriptsize,
        anchor=north west,
        xshift=-3pt,
        yshift=3pt
    }
    ] table {data/lipcorner_low_norm.dat};
    \addplot [red,
    domain=-0.5:0.5
    ] {1.893688218710873339e-02 +
      x * (-3.121906790233518192e-02 +
      x * (-5.189325604221312060e-02 +
      x * (1.475542295096524681e-01 +
      x * (-6.156357895166050254e-01))))};

  \end{axis}
  \end{scope}
\draw \myarrowopts ($(scope2.east)+(0.5cm,0)$) -- ($(scope2.east)+(2cm,0)$) node[above,midway] {extract coeffs.};
  \begin{scope}[shift={($(scope2.east)+(3cm,0)$)}]
% \node {$\colvec{5}{-0.616}{0.148}{-0.052}{-0.031}{0.019}$};
\node  {$\colvec{5}{a}{b}{c}{d}{e}$};
  \end{scope}

\end{tikzpicture}
\caption{InterpolationFeatureExtraction}
\end{figure}




\appendix % hier beginnt der Anhang
\printbibliography
\end{document}
